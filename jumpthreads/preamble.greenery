#define MERGE_(a,b) a##b
#define LABEL_(a) MERGE_(label`_, a)
#define GENLABEL LABEL_(__LINE__)
#define SWITCH { pcs` = &&GENLABEL; goto *pcs~ ; GENLABEL:;}
#define jthr_tid() (` - 1)
#define jthr_nthreads() SUBST_NTHREADS
#define jthr_yield() { SWITCH }
#define prefetch_and_switch(x) { __builtin_prefetch(x, 0, 0); jthr_yield(); }
#define jthr_exit() { goto label`_EXIT; }
